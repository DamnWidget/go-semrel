image: golang:1.9

variables:
  REPO_NAME: gitlab.com/$CI_PROJECT_PATH

before_script:
- mkdir -p $GOPATH/src/$(dirname $REPO_NAME)
- ln -svf $CI_PROJECT_DIR $GOPATH/src/$REPO_NAME
- cd $GOPATH/src/$REPO_NAME
- curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
- dep ensure

stages:
  - test
  
test-semrel:
  stage: test
  script:
  - go test -cover ./semrel

test-inspectgit:
  stage: test
  script:
  - go test -cover ./inspectgit

test-angularcommit:
  stage: test
  script:
  - go test -cover ./angularcommit
